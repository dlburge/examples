<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <title>Formula page</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <link rel="icon" href="/favicon.ico">

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

    <!-- custom styles/themes for external libraries -->

    <!-- build:css /styles/themes/jquery-ui/jquery-ui.css -->
    <link rel="stylesheet" href="/styles/themes/jquery-ui/jquery-ui-1.10.3.custom.min.css">
    <!-- endbuild -->

    <!-- build:css /styles/themes/bootstrap/bootstrap.css -->
    <link rel="stylesheet" href="/styles/themes/bootstrap/bootstrap.css">
    <!-- endbuild -->

    <!-- build:css /styles/themes/kendo-ui/kendo-ui.css -->
    <link rel="stylesheet" href="../bower_components/kendo-ui/styles/kendo.common.min.css">
    <link rel="stylesheet" href="../bower_components/kendo-ui/styles/kendo.silver.min.css">
    <!-- endbuild -->

    <link rel="stylesheet" href="/styles/base/base.css">
    <link rel="stylesheet" href="/styles/layout/layout.css">
    <link rel="stylesheet" href="/styles/modules/sidebar.css">
    <link rel="stylesheet" href="/styles/modules/pageSummary.css">
    <link rel="stylesheet" href="/styles/modules/menuToggle.css">
    <link rel="stylesheet" href="/styles/modules/breadcrumb.css">
    <link rel="stylesheet" href="/styles/modules/tagList.css">
    <link rel="stylesheet" href="/styles/modules/formsSections.css">
    <link rel="stylesheet" href="/styles/modules/editableTable.css">
    <link rel="stylesheet" href="/styles/modules/popinEditor.css">
    <link rel="stylesheet" href="/styles/modules/formula.css">

    <!--[if IE 8]>
        <link rel="stylesheet" href="/styles/compatibility/ie8.css">
        <![endif]-->

    <!-- build:js /scripts/libraries/modernizr.js -->
    <script src="../bower_components/modernizr/modernizr.js"></script>
    <!-- endbuild -->

</head>

<body>

    <div class="l-layout menu-is-visible" id="l-layout">

        <!-- START : Main content -->
        <main class="l-main" id="l-main">
            <div class="l-main-content" id="l-main-content">

                <!-- Page header -->
                <header class="page-summary">
                    <h1 class="page-summary-title">Formula section</h1>
                </header>

                <!-- START : Sections -->
                <span class="anchor-target" id="section-formula"></span>
                <fieldset class="section">
                    <legend class="section-title is-collapsible is-open level-1">Formula</legend>
                    <hr>
                    <div class="collapsible-target">

                        <fieldset class="section section-level-1">
                            <legend class="section-title is-collapsible is-open level-2">Ingredient table</legend>
                            <hr>
                            <div class="collapsible-target scrollable">

                                <table id="formula-ingredient-table" width="100%" class="editable-table ingredients formula edit left-align-fields">
                                <colgroup>
                                    <col>
                                    <col class="row-count-col">
                                    <col>
                                    <col class="highlight">
                                    <col>
                                    <col>
                                    <col class="highlight">
                                    <col class="highlight">
                                    <col>
                                    <col class="highlight">
                                    <col class="highlight">
                                    <col>
                                    <col>
                                    <col>
                                </colgroup>
                                <thead>
                                <tr>
                                    <th class="delete-row empty"></th>
                                    <th class="empty"></th>
                                    <th>
                                        <button class="collapse-all-rows" name="" value="">Collapse/Expand</button>
                                    </th>
                                    <th class="highlight-title border-bottom"></th>
                                    <th class="highlight-title border-bottom" colspan="2">Finished process amount</th>
                                    <th class="highlight-title border-bottom" colspan="2">Preprocessing amount</th>
                                    <th class="highlight-title border-bottom">Additive function</th>
                                    <th class="highlight-title border-bottom" colspan="2">Supplier</th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                </tr>
                                <tr>
                                    <th class="delete-row empty"></th>
                                    <th class="empty"></th>
                                    <th>Ingredient name</th>
                                    <th>Reference name</th>
                                    <th class="center-align">Qty</th>
                                    <th class="center-align">%</th>
                                    <th class="center-align">Qty</th>
                                    <th class="center-align">%</th>
                                    <th></th>
                                    <th>Name</th>
                                    <th>Country</th>
                                    <th>Origin</th>
                                    <th>GMO Organism</th>
                                    <th>Organic</th>
                                </tr>
                                </thead>
                                <tfoot class="total">
                                <tr>
                                    <td colspan="4" class="total-title">Total</td>
                                    <td>244g</td>
                                    <td>100%</td>
                                    <td>244g</td>
                                    <td>100%</td>
                                    <td colspan="6"></td>
                                </tr>
                                </tfoot>
                                <tbody id="0123-1">
                                <tr>
                                    <td class="delete-row empty"></td>
                                    <td class="row-count row-count-1">1</td>
                                    <td>
                                        abcd
                                        <span title="Local ingredient" class="ingredient-local">&nbsp;</span>
                                    </td>
                                    <td class="ref-name">xxxxxxxx</td>
                                    <td class="finished-qty">132g (125g-140g)</td>
                                    <td class="finished-pct">56% (50%-60%)</td>
                                    <td class="pre-qty">132g (125g-140g)</td>
                                    <td class="pre-pct">56% (50%-60%)</td>
                                    <td class="additive-funct">xxxxx</td>
                                    <td class="supplier-name">xxxxx</td>
                                    <td class="supplier-country">xxxxx</td>
                                    <td class="origin">xxxxx</td>
                                    <td class="gmo-orga">xxxxx</td>
                                    <td class="organic">Yes</td>
                                </tr>
                                </tbody>
                                <tbody id="0123-2">
                                <tr>
                                    <td class="delete-row empty"></td>
                                    <td class="row-count row-count-1">2</td>
                                    <td>
                                        xxxxxxxx
                                        <span title="Local ingredient" class="ingredient-local">&nbsp;</span>
                                    </td>
                                    <td>xxxxxxxx</td>
                                    <td>132g (125g-140g)</td>
                                    <td>56% (50%-60%)</td>
                                    <td>132g (125g-140g)</td>
                                    <td>56% (50%-60%)</td>
                                    <td>xxxxx</td>
                                    <td>xxxxx</td>
                                    <td>xxxxx</td>
                                    <td>xxxxx</td>
                                    <td>xxxxx</td>
                                    <td>Yes</td>
                                </tr>
                                </tbody>
                                <tbody id="0123-3">
                                <tr>
                                    <td class="delete-row empty"></td>
                                    <td class="row-count row-count-1">3</td>
                                    <td>
                                        xxxxxxxx
                                        <span title="Local ingredient" class="ingredient-local">&nbsp;</span>
                                    </td>
                                    <td>xxxxxxxx</td>
                                    <td>132g (125g-140g)</td>
                                    <td>56% (50%-60%)</td>
                                    <td>132g (125g-140g)</td>
                                    <td>56% (50%-60%)</td>
                                    <td>xxxxx</td>
                                    <td>Supplier 1</td>
                                    <td>Supplier 1 country</td>
                                    <td>Argentina</td>
                                    <td>xxxxx</td>
                                    <td>Yes</td>
                                </tr>
                                <tr>
                                    <td class="delete-row empty"></td>
                                    <td class="row-count row-count-1"></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td class="supplier-name">Supplier 2</td>
                                    <td class="supplier-country">Supplier 2 country</td>
                                    <td class="origin">France, USA</td>
                                    <td class="gmo-orga">xxxxx</td>
                                    <td class="organic">Yes</td>
                                </tr>
                                </tbody>
                                </table>

                            </div>
                        </fieldset>

                        <fieldset class="section section-level-1">
                            <legend class="section-title is-collapsible is-open level-2">Additive table</legend>
                            <hr>
                            <div class="collapsible-target">
                                TODO
                            </div>
                        </fieldset>

                    </div>
                </fieldset>
                <!-- END : Sections -->

            </div>
        </main>
        <!-- END : Main content -->

        <!-- START : Sidebar -->
        <!-- Menu toggle -->
        <a href="#menu" id="menuToggle" class="menu-toggle">
            <!-- Hamburger icon -->
            <span></span>
        </a>
        <aside class="l-sidebar" id="l-sidebar">
            <div class="l-sidebar-content">

                <!-- START : Menu "Who" -->
                <div class="menu who">
                    <h3 class="menu-title is-collapsible is-open">
                            <span>Communities</span>
                        </h3>
                    <div class="menu-content-wrapper collapsible-target">
                        <ul>
                            <li>
                                <span class="is-collapsible is-open">Clients</span>
                                <ul class="collapsible-target">
                                    <li><a href="#">Client 1</a>
                                    </li>
                                    <li class="selected"><a href="#">Client 2</a>
                                    </li>
                                    <li><a href="#">Client 3</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- END : Menu "Who" -->

                <!-- START : Menu "What" -->
                <div class="menu what">
                    <h3 class="menu-title is-collapsible is-open">
                            <span>Projects</span>
                        </h3>
                    <div class="menu-content-wrapper collapsible-target">
                        <ul>
                            <li>
                                <span class="is-collapsible is-open">Projects</span>
                                <ul class="collapsible-target">
                                    <li><a href="#">Project 1</a>
                                    </li>
                                    <li class="selected"><a href="#">Project 2</a>
                                    </li>
                                    <li><a href="#">Project 3</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- END : Menu "What" -->

                <!-- START : Menu "Sections" -->
                <div class="menu sections">
                    <h3 class="menu-title is-collapsible is-open">
                            <span>Sections</span>
                        </h3>
                    <div class="menu-content-wrapper collapsible-target">
                        <ul class="selectable">
                            <li><a href="#section-prod-id">Product Identification</a>
                            </li>
                            <li><a href="#section-trace">Raw Material Traceability</a>
                            </li>
                            <li><a href="#section-allergens">Allergens</a>
                            </li>
                            <li class="selected"><a href="#section-formula">Formula</a>
                            </li>
                            <li><a href="#section-questions">Questions</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- END : Menu "Sections" -->

            </div>
        </aside>
        <!-- START : Sidebar -->

    </div>

    <!-- build:js /scripts/libraries/jquery.js -->
    <!-- bower:js -->
    <script src="/bower_components/jquery/dist/jquery.js"></script>
    <script src="/bower_components/jquery-ui/ui/minified/jquery.ui.core.min.js"></script>
    <script src="/bower_components/jquery-ui/ui/minified/jquery.ui.widget.min.js"></script>
    <script src="/bower_components/jquery-ui/ui/minified/jquery.ui.mouse.min.js"></script>
    <script src="/bower_components/jquery-ui/ui/minified/jquery.ui.position.min.js"></script>
    <script src="/bower_components/jquery-ui/ui/minified/jquery.ui.draggable.min.js"></script>
    <script src="/bower_components/jquery-ui/ui/minified/jquery.ui.resizable.min.js"></script>
    <script src="/bower_components/jquery-ui/ui/minified/jquery.ui.sortable.min.js"></script>
    <script src="/bower_components/jquery-ui/ui/minified/jquery.ui.autocomplete.min.js"></script>
    <script src="/bower_components/jquery-ui/ui/minified/jquery.ui.button.min.js"></script>
    <script src="/bower_components/jquery-ui/ui/minified/jquery.ui.datepicker.min.js"></script>
    <script src="/bower_components/jquery-ui/ui/minified/jquery.ui.dialog.min.js"></script>
    <script src="/bower_components/jquery-ui/ui/minified/jquery.ui.menu.min.js"></script>
    <script src="/bower_components/jquery-ui/ui/minified/jquery.ui.tooltip.min.js"></script>
    <!-- endbower -->
    <!-- endbuild -->

    <!-- build:js /scripts/libraries/kendo.js -->
    <!-- bower:js -->
    <script src="/bower_components/kendo-ui/js/kendo.web.min.js"></script>
    <!-- endbower -->
    <!-- endbuild -->

    <!-- build:js /scripts/libraries/libs.js -->
    <!-- bower:js -->
    <script src="/bower_components/mustache/mustache.js"></script>
    <!-- endbower -->
    <!-- endbuild -->

    <!-- TODO : remove during integration -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-mockjax/1.5.3/jquery.mockjax.min.js"></script>

    <script src="/scripts/smartResize.js"></script>
    <script src="/scripts/namespace.js"></script>
    <script src="/scripts/layout.js"></script>
    <script src="/scripts/collapsible.js"></script>
    <script src="/scripts/tagList.js"></script>
    <script src="/scripts/formula.js"></script>
    <script src="/scripts/popinFieldEditor.js"></script>

    <script>
        //on page load
        $(function () {
            //setup layout scripts
            TraceOne.layout.init({
                elems: {
                    layout: "#l-layout",
                    header: "#l-header",
                    main: "#l-main",
                    mainContent: "#l-main-content",
                    sidebar: "#l-sidebar",
                    menuToggle: "#menuToggle"
                },
                scrollableClass: "scrollable",
                autoCompleteClass: "ui-autocomplete",
                menuIsVisibleClass: "menu-is-visible"
            });

            //setup sidebar menu scripts
            TraceOne.collapsible.init({
                targetClass: "collapsible-target", //elem that will be collapsed
                collapsibleClass: "is-collapsible", //elem that we attach the handler on
                onChangeCallbacks: []
            });

            //setup formula section editors
            TraceOne.popinFieldEditor.init({
                container : ".edit.formula .popin-qty-editor",
                unitRefList : [
                    {"value":"1", "label":"mg"},
                    {"value":"2", "label":"g"},
                    {"value":"3", "label":"l"},
                    {"value":"4", "label":"cm"}
                ],
                appendPointClass : ".l-layout",
                imgBaseUrl : "/img/ico/"
            });

            TraceOne.formula.init({
                tableId : "formula-ingredient-table",
                unitRefList : [
                    {"value":"1", "label":"mg"},
                    {"value":"2", "label":"g"},
                    {"value":"3", "label":"l"},
                    {"value":"4", "label":"cm"}
                ],
                urls : {
                    "get" : "/ingredient/load/",
                    "post" : "/ingredient/update/"
                }
            });

        });
    </script>

</body>

</html>
